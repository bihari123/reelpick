{"ast":null,"code":"var _s = $RefreshSig$();\n// src/components/Upload/hooks/useFileUpload.ts\n\nimport { useState, useCallback } from \"react\";\nimport { FileUploadService } from \"../services/fileUploadService\";\nexport const useFileUpload = () => {\n  _s();\n  const [progress, setProgress] = useState(0);\n  const [status, setStatus] = useState(\"idle\");\n  const [error, setError] = useState(null);\n  const [isUploading, setIsUploading] = useState(false);\n  const uploadService = new FileUploadService();\n  const resetUpload = useCallback(() => {\n    setProgress(0);\n    setStatus(\"idle\");\n    setError(null);\n    setIsUploading(false);\n  }, []);\n  const cancelUpload = useCallback(() => {\n    uploadService.cancelProcessing();\n    resetUpload();\n  }, [resetUpload]);\n  const uploadFile = useCallback(async file => {\n    try {\n      setIsUploading(true);\n      setError(null);\n      await uploadService.uploadFile(file, {\n        onProgress: setProgress,\n        onStatusChange: setStatus,\n        onSuccess: () => {\n          setIsUploading(false);\n          setStatus(\"completed\");\n        },\n        onError: error => {\n          setError(error.message);\n          setIsUploading(false);\n          setStatus(\"failed\");\n        }\n      });\n    } catch (error) {\n      setError(error.message);\n      setIsUploading(false);\n      setStatus(\"failed\");\n    }\n  }, []);\n  return {\n    progress,\n    status,\n    error,\n    isUploading,\n    uploadFile,\n    resetUpload,\n    cancelUpload\n  };\n};\n_s(useFileUpload, \"qVg79jTDkunuTaFXdsRCqwOXeec=\");","map":{"version":3,"names":["useState","useCallback","FileUploadService","useFileUpload","_s","progress","setProgress","status","setStatus","error","setError","isUploading","setIsUploading","uploadService","resetUpload","cancelUpload","cancelProcessing","uploadFile","file","onProgress","onStatusChange","onSuccess","onError","message"],"sources":["/media/tarun/ITB/code/work/thinkelution/Videolution-Analyzer-App/src/Components/Upload/hooks/useFileUpload.ts"],"sourcesContent":["// src/components/Upload/hooks/useFileUpload.ts\n\nimport { useState, useCallback } from \"react\";\nimport { FileUploadService } from \"../services/fileUploadService\";\nimport { ProcessingStep } from \"../utils/upload.types\";\n\ninterface UseFileUploadReturn {\n  progress: number;\n  status: ProcessingStep;\n  error: string | null;\n  isUploading: boolean;\n  uploadFile: (file: File) => Promise<void>;\n  resetUpload: () => void;\n  cancelUpload: () => void;\n}\n\nexport const useFileUpload = (): UseFileUploadReturn => {\n  const [progress, setProgress] = useState<number>(0);\n  const [status, setStatus] = useState<ProcessingStep>(\"idle\");\n  const [error, setError] = useState<string | null>(null);\n  const [isUploading, setIsUploading] = useState<boolean>(false);\n\n  const uploadService = new FileUploadService();\n\n  const resetUpload = useCallback(() => {\n    setProgress(0);\n    setStatus(\"idle\");\n    setError(null);\n    setIsUploading(false);\n  }, []);\n\n  const cancelUpload = useCallback(() => {\n    uploadService.cancelProcessing();\n    resetUpload();\n  }, [resetUpload]);\n\n  const uploadFile = useCallback(async (file: File) => {\n    try {\n      setIsUploading(true);\n      setError(null);\n\n      await uploadService.uploadFile(file, {\n        onProgress: setProgress,\n        onStatusChange: setStatus,\n        onSuccess: () => {\n          setIsUploading(false);\n          setStatus(\"completed\");\n        },\n        onError: (error) => {\n          setError(error.message);\n          setIsUploading(false);\n          setStatus(\"failed\");\n        },\n      });\n    } catch (error) {\n      setError((error as Error).message);\n      setIsUploading(false);\n      setStatus(\"failed\");\n    }\n  }, []);\n\n  return {\n    progress,\n    status,\n    error,\n    isUploading,\n    uploadFile,\n    resetUpload,\n    cancelUpload,\n  };\n};\n"],"mappings":";AAAA;;AAEA,SAASA,QAAQ,EAAEC,WAAW,QAAQ,OAAO;AAC7C,SAASC,iBAAiB,QAAQ,+BAA+B;AAajE,OAAO,MAAMC,aAAa,GAAGA,CAAA,KAA2B;EAAAC,EAAA;EACtD,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGN,QAAQ,CAAS,CAAC,CAAC;EACnD,MAAM,CAACO,MAAM,EAAEC,SAAS,CAAC,GAAGR,QAAQ,CAAiB,MAAM,CAAC;EAC5D,MAAM,CAACS,KAAK,EAAEC,QAAQ,CAAC,GAAGV,QAAQ,CAAgB,IAAI,CAAC;EACvD,MAAM,CAACW,WAAW,EAAEC,cAAc,CAAC,GAAGZ,QAAQ,CAAU,KAAK,CAAC;EAE9D,MAAMa,aAAa,GAAG,IAAIX,iBAAiB,CAAC,CAAC;EAE7C,MAAMY,WAAW,GAAGb,WAAW,CAAC,MAAM;IACpCK,WAAW,CAAC,CAAC,CAAC;IACdE,SAAS,CAAC,MAAM,CAAC;IACjBE,QAAQ,CAAC,IAAI,CAAC;IACdE,cAAc,CAAC,KAAK,CAAC;EACvB,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMG,YAAY,GAAGd,WAAW,CAAC,MAAM;IACrCY,aAAa,CAACG,gBAAgB,CAAC,CAAC;IAChCF,WAAW,CAAC,CAAC;EACf,CAAC,EAAE,CAACA,WAAW,CAAC,CAAC;EAEjB,MAAMG,UAAU,GAAGhB,WAAW,CAAC,MAAOiB,IAAU,IAAK;IACnD,IAAI;MACFN,cAAc,CAAC,IAAI,CAAC;MACpBF,QAAQ,CAAC,IAAI,CAAC;MAEd,MAAMG,aAAa,CAACI,UAAU,CAACC,IAAI,EAAE;QACnCC,UAAU,EAAEb,WAAW;QACvBc,cAAc,EAAEZ,SAAS;QACzBa,SAAS,EAAEA,CAAA,KAAM;UACfT,cAAc,CAAC,KAAK,CAAC;UACrBJ,SAAS,CAAC,WAAW,CAAC;QACxB,CAAC;QACDc,OAAO,EAAGb,KAAK,IAAK;UAClBC,QAAQ,CAACD,KAAK,CAACc,OAAO,CAAC;UACvBX,cAAc,CAAC,KAAK,CAAC;UACrBJ,SAAS,CAAC,QAAQ,CAAC;QACrB;MACF,CAAC,CAAC;IACJ,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,QAAQ,CAAED,KAAK,CAAWc,OAAO,CAAC;MAClCX,cAAc,CAAC,KAAK,CAAC;MACrBJ,SAAS,CAAC,QAAQ,CAAC;IACrB;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO;IACLH,QAAQ;IACRE,MAAM;IACNE,KAAK;IACLE,WAAW;IACXM,UAAU;IACVH,WAAW;IACXC;EACF,CAAC;AACH,CAAC;AAACX,EAAA,CAtDWD,aAAa","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}